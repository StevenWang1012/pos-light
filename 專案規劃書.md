專案進度報告：Don Gus 輕量化民宿 POS 系統

日期： 2025-12-26
狀態： Phase 1 - 前端展示與邏輯驗證完成 (MVP Ready for Demo)
開發者： Gemini & PM

1. 目前完成進度 (Phase 1 Achievements)

我們已經成功建立了一個基於 Web 的雙端點餐系統，並透過 Vercel 進行部署。

核心架構

[x] 技術堆疊：React (Vite) + Tailwind CSS + TypeScript。

[x] 部署流程：GitHub 自動化部署至 Vercel (CI/CD)。

[x] 資料流：使用 store.ts 進行集中狀態管理 (目前基於 LocalStorage)。

📱 客人端 (Customer App) - 現代化點餐體驗

[x] 介面風格：針對一般大眾設計的現代化 UI，視覺精緻、操作流暢。

[x] 點餐流程：

掃碼自動帶入桌號。

菜單瀏覽 (支援分類切換)。

餐點選項 (冷/熱、甜度、備註)。

購物車與訂單送出。

[x] 位置驗證：已實作 GPS 距離計算邏輯 (防止遠端惡意下單)。

🖥️ 店家端 (Merchant App) - 長輩友善設計

[x] 介面風格：極致的「長輩友善」設計 (超大字體、高對比色塊、防呆按鈕)。

[x] 桌位管理：

視覺化桌況 (空閒/點餐中/製作中/已結帳)。

新功能：狀態顏色連動邏輯修正 (客人一點餐，桌子立刻變色)。

新功能：一鍵生成並預覽/列印桌邊 QR Code。

[x] 訂單處理：

接收訂單、核對明細。

出餐管理 (劃掉已上菜品項)。

結帳與清桌功能。

[x] 報表系統：基本的營收圖表與熱銷排行統計。

[x] 菜單管理：簡易的菜單編輯與圖片上傳預覽 (目前存在本地)。

2. 系統架構現狀圖

graph LR
    User[客人手機] -- 寫入 --> LocalStorage_A[瀏覽器 A 本地儲存]
    Owner[老闆平板] -- 讀取 --> LocalStorage_B[瀏覽器 B 本地儲存]
    
    style LocalStorage_A fill:#f9f,stroke:#333,stroke-width:2px
    style LocalStorage_B fill:#f9f,stroke:#333,stroke-width:2px
    
    subgraph 現狀問題：斷裂的連結
    LocalStorage_A -.-> |無法互通| LocalStorage_B
    end


3. 落地化必備條件 (Requirements for Production)

若要將此系統真正安裝在民宿餐廳運作，我們必須完成 Phase 2 (神經連結) 的開發。以下是缺一不可的關鍵要素：

A. 雲端大腦 (Database & Real-time)

現況：資料存在各自的手機裡，老闆看不到客人的單。

需求：導入 Supabase。

建立雲端資料庫 (orders, menu, tables)。

實作 WebSocket 即時監聽：客人送出 -> 雲端 -> 老闆平板 0.5 秒內自動響鈴跳出訂單。

資料持久化：換手機或重新整理網頁，營業數據不會消失。

B. 實體列印整合 (Printing Hardware)

現況：依賴瀏覽器預覽列印，操作繁瑣且格式難以完美對齊熱感應紙。

需求：

採購支援 Web 列印 (如 AirPrint 或 Star CloudPRNT) 的出單機。

或開發「靜默列印」邏輯，讓老闆按一下「接單」，出單機直接吐紙。

C. 權限與安全性 (Security)

現況：任何知道網址的人都能進入管理後台修改菜單或刪除桌位。

需求：

店家登入系統：簡單的 Email/密碼登入，鎖定管理權限。

防刷單機制：限制同一 IP 或裝置短時間內的下單頻率。

D. 網路韌性 (PWA / Offline Mode)

現況：民宿 Wi-Fi 若不穩定，網頁可能無法載入。

需求：

設定 PWA (Progressive Web App)：讓網頁能像 App 一樣安裝在 iPad 桌面。

離線快取：斷網時仍能查看舊訂單，網路恢復後自動同步新資料。

4. 下一步行動建議 (Next Steps)

資料庫規劃：設計 Supabase 的 Table Schema (資料表結構)。

API 串接：將 store.ts 中的 LocalStorage 邏輯替換為 Supabase SDK。

現場測試：在真實環境下測試 GPS 訊號與 QR Code 掃描流程。
